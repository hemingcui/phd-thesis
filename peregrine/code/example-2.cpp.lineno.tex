% Remember to use the lgrind style

\Head{}
\File{example\-2.cpp.lineno}{2014}{12}{22}{16:03}{1288}
\L{\LB{\N{1}_\V{:}_\K{int}_*\V{matrix}_=_\V{NULL};}}
\L{\LB{\N{2}_\V{:}_\K{int}_\V{size};_\C{}//_size_of_\CE{}\V{matrix}\C{}\CE{}}}
\L{\LB{\N{3}_\V{:}_\K{int}_\V{nthread};_\C{}//_total_number_of_threads\CE{}}}
\L{\LB{\N{4}_\V{:}_\K{unsigned}_\K{long}_\V{finishtime}_=_\N{0};}}
\L{\LB{\N{5}_\V{:}_}}
\index{main}\Proc{main}\L{\LB{\N{6}_\V{:}_\K{void}_\V{main}(\K{int}_\V{argc},_\K{char}_*\V{argv}[\,])_\{}}
\L{\LB{\N{7}_\V{:}}\Tab{8}{\V{nthread}_=_\V{atoi}(\V{argv}[\N{1}]);}}
\L{\LB{\N{8}_\V{:}}\Tab{8}{\V{size}_=_\V{atoi}(\V{argv}[\N{2}]);}}
\L{\LB{\N{9}_\V{:}}\Tab{8}{\V{matrix}_=_(\K{int}*)\V{malloc}(\V{size}*\K{sizeof}(\K{int}));}}
\L{\LB{\N{10}\V{:}}\Tab{8}{.\,.\,._\C{}//_initialize_\CE{}\C{}\CE{}}}
\L{\LB{\N{11}\V{:}}\Tab{8}{\V{pthread\_create}(.\,.\,.,_\V{SlaveStart1},_(\K{void}*)\N{1});}}
\L{\LB{\N{12}\V{:}}\Tab{8}{\V{SlaveStart0}(\N{0});}}
\L{\LB{\N{13}\V{:}}\Tab{8}{\C{}//_NOTE:_missing_\CE{}\V{pthread\_join}()\C{}\CE{}}}
\L{\LB{\N{14}\V{:}}\Tab{8}{\V{printf}(\S{}\3finish_time:_\%lu\2n\3\SE{},_\V{finishtime});}}
\L{\LB{\N{15}\V{:}_\}}}
\L{\LB{\N{16}\V{:}_}}
\index{SlaveStart0}\Proc{SlaveStart0}\L{\LB{\N{17}\V{:}_\K{void}*_\V{SlaveStart0}(\K{void}_*\V{arg})_\{}}
\L{\LB{\N{18}\V{:}}\Tab{8}{\K{int}_*\V{upriv}_=_(\K{int}*)\V{malloc}(.\,.\,.);_\C{}//_temp_buffer\CE{}}}
\L{\LB{\N{19}\V{:}}\Tab{8}{\K{int}_\V{start}_=_\N{0};}}
\L{\LB{\N{20}\V{:}}\Tab{8}{\K{int}_\V{end}_=_\V{size}/\V{nthread};}}
\L{\LB{\N{21}\V{:}}\Tab{8}{\K{for}(\K{int}_\V{i}=\V{start};_\V{i}\<=\V{end};_++\V{i})_\{}}
\L{\LB{\N{22}\V{:}}\Tab{12}{\C{}//_compute_using_\CE{}\V{upriv}\C{}_and_\CE{}\V{matrix}\C{}\CE{}}}
\L{\LB{\N{23}\V{:}}\Tab{12}{\V{upriv}[.\,.\,.]_=_\V{matrix}[\V{i}]_.\,.\,.;}}
\L{\LB{\N{24}\V{:}}\Tab{12}{\V{matrix}[\V{i}]_=_.\,.\,.;}}
\L{\LB{\N{25}\V{:}}\Tab{8}{\}}}
\L{\LB{\N{26}\V{:}}\Tab{8}{\V{pthread\_barrier\_wait}(.\,.\,.);}}
\L{\LB{\N{27}\V{:}}\Tab{8}{\V{finishtime}_=_.\,.\,.;}}
\L{\LB{\N{28}\V{:}_\}}}
\L{\LB{\N{29}\V{:}_}}
\index{SlaveStart1}\Proc{SlaveStart1}\L{\LB{\N{30}\V{:}_\K{void}*_\V{SlaveStart1}(\K{void}_*\V{arg})_\{}}
\L{\LB{\N{31}\V{:}}\Tab{8}{\K{int}_*\V{upriv}_=_(\K{int}*)\V{malloc}(.\,.\,.);_\C{}//_temp_buffer\CE{}}}
\L{\LB{\N{32}\V{:}}\Tab{8}{\K{int}_\V{start}_=_\V{size}/\V{nthread};}}
\L{\LB{\N{33}\V{:}}\Tab{8}{\K{int}_\V{end}_=_\V{size}/\V{nthread}_*_\N{2};}}
\L{\LB{\N{34}\V{:}}\Tab{8}{\K{for}(\K{int}_\V{i}=\V{start};_\V{i}\<=\V{end};_++\V{i})_\{}}
\L{\LB{\N{35}\V{:}}\Tab{12}{\C{}//_compute_using_\CE{}\V{upriv}\C{}_and_\CE{}\V{matrix}\C{}\CE{}}}
\L{\LB{\N{36}\V{:}}\Tab{12}{\V{upriv}[.\,.\,.]_=_\V{matrix}[\V{i}]_.\,.\,.;}}
\L{\LB{\N{37}\V{:}}\Tab{12}{\V{matrix}[\V{i}]_=_.\,.\,.;}}
\L{\LB{\N{38}\V{:}}\Tab{8}{\}}}
\L{\LB{\N{39}\V{:}}\Tab{8}{\V{pthread\_barrier\_wait}(.\,.\,.);}}
\L{\LB{\N{40}\V{:}}\Tab{8}{\V{finishtime}_=_.\,.\,.;}}
\L{\LB{\N{41}\V{:}_\}}}
