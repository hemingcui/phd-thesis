% Remember to use the lgrind style

\Head{}
\File{input\-race.cpp.lineno}{2014}{12}{18}{0:10}{2168}
\L{\LB{\N{1}_\V{:}_\C{}//_detect_input-dependent_races,_and_add_involved_dynamic_instruction\CE{}}}
\L{\LB{\N{2}_\V{:}_\C{}//_instances_to_\CE{}\V{slicing\_targets}\C{}_used_by_the_inter-thread_step._\CE{}\V{r1}\C{}_and\CE{}}}
\L{\LB{\N{3}_\V{:}_\C{}//_\CE{}\V{r2}\C{}_are_two_concurrent_regions\CE{}}}
\index{detect\_input\_dependent\_races}\Proc{detect\_input\_dependent\_races}\L{\LB{\N{4}_\V{:}_\K{void}_\V{detect\_input\_dependent\_races}(\V{r1},_\V{r2})_\{}}
\L{\LB{\N{5}_\V{:}}\Tab{6}{\C{}//_iterate_through_all_instruction_pairs_in_r1,_r2\CE{}}}
\L{\LB{\N{6}_\V{:}}\Tab{6}{\K{for}_(\V{i1},_\V{i2})_\V{in}_(\V{r1},_\V{r2})_\{}}
\L{\LB{\N{7}_\V{:}}\Tab{8}{\K{if}_(\V{neither}_\V{i1}_\V{nor}_\V{i2}_\V{is}_\V{a}_\V{branch}_\V{instruction})_\{}}
\L{\LB{\N{8}_\V{:}}\Tab{10}{\K{if}(\V{mayrace}(\V{i1},_\V{i2}))_\{}}
\L{\LB{\N{9}_\V{:}}\Tab{12}{\V{slicing\_targets}.\V{add}(\V{i1});_\C{}//_add_\CE{}\V{i1}\C{}_to_slicing_targets\CE{}}}
\L{\LB{\N{10}\V{:}}\Tab{12}{\V{slicing\_targets}.\V{add}(\V{i2});_\C{}//_add_\CE{}\V{i2}\C{}_to_slicing_targets\CE{}}}
\L{\LB{\N{11}\V{:}}\Tab{10}{\}}}
\L{\LB{\N{12}\V{:}}\Tab{8}{\}_\K{else}_\K{if}_(\V{exactly}_\V{one}_\V{of}_\V{i1},_\V{i2}_\V{is}_\V{a}_\V{branch}_\V{instruction})_\{}}
\L{\LB{\N{13}\V{:}}\Tab{10}{\V{br}_=_\V{branch}_\V{instruction}_\V{in}_\V{i1},_\V{i2};}}
\L{\LB{\N{14}\V{:}}\Tab{10}{\V{inst}_=_\V{the}_\V{other}_\V{instruction}_\V{in}_\V{i1},_\V{i2};}}
\L{\LB{\N{15}\V{:}}\Tab{10}{\V{nottaken}_=_\V{the}_\V{not}_\V{taken}_\V{branch}_\V{of}_\V{br}_\V{in}_\V{the}_\V{execution}_\V{trace};}}
\L{\LB{\N{16}\V{:}}\Tab{10}{\K{if}(\V{mayrace\_br}(\V{br},_\V{nottaken},_\V{inst}))_\{}}
\L{\LB{\N{17}\V{:}}\Tab{12}{\C{}//_add_the_taken_branch_of_\CE{}\V{br}\C{}_to_slicing_targets\CE{}}}
\L{\LB{\N{18}\V{:}}\Tab{12}{\V{taken}_=_\V{the}_\V{taken}_\V{branch}_\V{of}_\V{br}_\V{in}_\V{trace};}}
\L{\LB{\N{19}\V{:}}\Tab{12}{\V{slicing\_targets}.\V{add\_br}(\V{br},_\V{taken});}}
\L{\LB{\N{20}\V{:}}\Tab{10}{\}}}
\L{\LB{\N{21}\V{:}}\Tab{8}{\}_\K{else}_\{_\C{}//_both_\CE{}\V{i1}\C{},_\CE{}\V{i2}\C{}_are_branches\CE{}}}
\L{\LB{\N{22}\V{:}}\Tab{10}{\V{nottaken1}_=_\V{the}_\V{not}_\V{taken}_\V{branch}_\V{of}_\V{i1}_\V{in}_\V{trace};}}
\L{\LB{\N{23}\V{:}}\Tab{10}{\V{nottaken2}_=_\V{the}_\V{not}_\V{taken}_\V{branch}_\V{of}_\V{i2}_\V{in}_\V{trace};}}
\L{\LB{\N{24}\V{:}}\Tab{10}{\K{if}(\V{mayrace\_br\_br}(\V{i1},_\V{nottaken1},_\V{i2},_\V{nottaken2})_\{}}
\L{\LB{\N{25}\V{:}}\Tab{12}{\V{taken1}_=_\V{the}_\V{taken}_\V{branch}_\V{of}_\V{i1}_\V{in}_\V{trace};}}
\L{\LB{\N{26}\V{:}}\Tab{12}{\V{slicing\_targets}.\V{add\_br}(\V{i1},_\V{taken1});}}
\L{\LB{\N{27}\V{:}}\Tab{10}{\}}}
\L{\LB{\N{28}\V{:}}\Tab{8}{\}}}
\L{\LB{\N{29}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{30}\V{:}_\}}}
\L{\LB{\N{31}\V{:}_\C{}//_return_true_if_instructions_\CE{}\V{i1}\C{}_and_\CE{}\V{i2}\C{}_may_race\CE{}}}
\index{mayrace}\Proc{mayrace}\L{\LB{\N{32}\V{:}_\K{bool}_\V{mayrace}(\V{i1},_\V{i2})_\{}}
\L{\LB{\N{33}\V{:}}\Tab{6}{\C{}//_query_alias_analysis\CE{}}}
\L{\LB{\N{34}\V{:}}\Tab{6}{\K{return}_\V{mayalias}(\V{i1},_\V{i2})_\&\&_((\V{i1}_\V{is}_\V{a}_\V{store})_\|\,\|_(\V{i2}_\V{is}_\V{a}_\V{store}));}}
\L{\LB{\N{35}\V{:}_\}}}
\L{\LB{\N{36}\V{:}_\C{}//_return_true_if_the_not-taken_branch_of_\CE{}\V{br}\C{}_may_race_with_\CE{}\V{inst}\C{}\CE{}}}
\index{mayrace\_br}\Proc{mayrace\_br}\L{\LB{\N{37}\V{:}_\K{bool}_\V{mayrace\_br}(\V{br},_\V{nottaken},_\V{inst})_\{}}
\L{\LB{\N{38}\V{:}}\Tab{6}{\K{for}_\V{i}_\V{in}_(\V{instructions}_\V{in}_\V{the}_\V{nottaken}_\V{branch}_\V{of}_\V{br})_\{}}
\L{\LB{\N{39}\V{:}}\Tab{8}{\K{if}(\V{mayrace}(\V{i},_\V{inst}))}}
\L{\LB{\N{40}\V{:}}\Tab{10}{\K{return}_\K{true};}}
\L{\LB{\N{41}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{42}\V{:}}\Tab{6}{\K{return}_\K{false};}}
\L{\LB{\N{43}\V{:}_\}}}
\L{\LB{\N{44}\V{:}_\C{}//_return_true_if_the_not-taken_branch_of_\CE{}\V{br1}\C{}_may_race_with_the\CE{}}}
\L{\LB{\N{45}\V{:}_\C{}//_not-taken_branch_of_\CE{}\V{br2}\C{}\CE{}}}
\index{mayrace\_br\_br}\Proc{mayrace\_br\_br}\L{\LB{\N{46}\V{:}_\K{bool}_\V{mayrace\_br\_br}(\V{br1},_\V{nottaken1},_\V{br2},_\V{nottaken2})_\{}}
\L{\LB{\N{47}\V{:}}\Tab{6}{\K{for}_\V{inst}_\V{in}_(\V{instructions}_\V{in}_\V{the}_\V{nottaken2}_\V{branch}_\V{of}_\V{br2})_\{}}
\L{\LB{\N{48}\V{:}}\Tab{8}{\K{if}(\V{mayrace\_br}(\V{br1},_\V{nottaken1},_\V{inst}))}}
\L{\LB{\N{49}\V{:}}\Tab{10}{\K{return}_\K{true};}}
\L{\LB{\N{50}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{51}\V{:}}\Tab{6}{\K{return}_\K{false};}}
\L{\LB{\N{52}\V{:}_\}}}
