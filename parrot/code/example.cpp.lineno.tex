% Remember to use the lgrind style

\Head{}
\File{example.cpp.lineno}{2014}{12}{21}{1:55}{765}
\index{main}\Proc{main}\L{\LB{\N{1}_\V{:}_\K{int}_\V{main}(\K{int}_\V{argc},_\K{char}_*\V{argv}[\,])_\{}}
\L{\LB{\N{2}_\V{:}}\Tab{6}{.\,.\,.}}
\L{\LB{\N{3}_\V{:}}\Tab{6}{\V{soba\_init}(\V{nthreads});_\C{}/*_performance_hint_*/\CE{}}}
\L{\LB{\N{4}_\V{:}}\Tab{6}{\K{for}_(\V{i}_=_\N{0};_\V{i}_\<_\V{nthreads};_++\V{i})}}
\L{\LB{\N{5}_\V{:}}\Tab{8}{\V{pthread\_create}(.\,.\,.,_\V{NULL},_\V{consumer},_\V{NULL});}}
\L{\LB{\N{6}_\V{:}}\Tab{6}{\K{for}_(\V{i}_=_\N{0};_\V{i}_\<_\V{nblocks};_++\V{i})_\{}}
\L{\LB{\N{7}_\V{:}}\Tab{8}{\K{char}_*\V{block}_=_\V{read\_block}(\V{i});}}
\L{\LB{\N{8}_\V{:}}\Tab{8}{\V{pthread\_mutex\_lock}(\&\V{mu});}}
\L{\LB{\N{9}_\V{:}}\Tab{8}{\V{enqueue}(\V{q},_\V{block});}}
\L{\LB{\N{10}\V{:}}\Tab{8}{\V{pthread\_cond\_signal}(\&\V{cv});}}
\L{\LB{\N{11}\V{:}}\Tab{8}{\V{pthread\_mutex\_unlock}(\&\V{mu});}}
\L{\LB{\N{12}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{13}\V{:}}\Tab{6}{.\,.\,.}}
\L{\LB{\N{14}\V{:}_\}}}
\index{consumer}\Proc{consumer}\L{\LB{\N{15}\V{:}_\K{void}_*\V{consumer}(\K{void}_*\V{arg})_\{}}
\L{\LB{\N{16}\V{:}}\Tab{6}{\K{while}(\N{1})_\{}}
\L{\LB{\N{17}\V{:}}\Tab{8}{\V{pthread\_mutex\_lock}(\&\V{mu});}}
\L{\LB{\N{18}\V{:}}\Tab{8}{\K{while}_(\V{empty}(\V{q}))_\C{}//_termination_logic_elided_for_clarity\CE{}}}
\L{\LB{\N{19}\V{:}}\Tab{10}{\V{pthread\_cond\_wait}(\&\V{cv},_\&\V{mu});}}
\L{\LB{\N{20}\V{:}}\Tab{8}{\K{char}_*\V{block}_=_\V{dequeue}(\V{q});}}
\L{\LB{\N{21}\V{:}}\Tab{8}{\V{pthread\_mutex\_unlock}(\&\V{mu});}}
\L{\LB{\N{22}\V{:}}\Tab{8}{.\,.\,.}}
\L{\LB{\N{23}\V{:}}\Tab{8}{\V{soba\_wait}();_\C{}/*_performance_hint_*/\CE{}}}
\L{\LB{\N{24}\V{:}}\Tab{8}{\V{compress}(\V{block});}}
\L{\LB{\N{25}\V{:}}\Tab{6}{\}}}
\L{\LB{\N{26}\V{:}_\}}}
